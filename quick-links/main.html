<!doctype html>
<html lang="en" class="h-100">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>Quick Links</title>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <link rel="stylesheet" type="text/css" href="public/stylesheets/quick-links.css">

    <script type="text/javascript" src="../assets/particle-network.min.js"></script>
</head>

<body class="d-flex h-100">

    <div class="h-100 w-100 p-0 m-0" id="particle"></div>

    <div class="cover-container d-flex w-100 h-100 justify-content-center mx-auto flex-column card-img-overlay">

        <div class="accordion shadow-sm" id="accordion_items">

            <div>
                <input class="form-control py-3" type="url" id="search-url" placeholder="Input the URL here" aria-label="Search" required></input>
            </div>

            <div class="accordion-item">
                <h2 class="accordion-header" id="head_find_archived">
                    <label class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#body_find_archived" aria-expanded="false" aria-controls="body_find_archived">
                        Find Archived Version
                    </label>
                </h2>
                <div id="body_find_archived" class="accordion-collapse collapse" aria-labelledby="head_find_archived" data-bs-parent="#accordion_items">
                    <div class="accordion-body d-flex justify-content-evenly" id="accordion-body-find_archived">
                        <button type="button" class="btn btn-secondary text-white search-btn" data-name="Google Cache">Google Cache</button>
                        <button type="button" class="btn btn-secondary text-white search-btn" data-name="Internet Archive">Internet Archive</button>
                        <button type="button" class="btn btn-secondary text-white search-btn" data-name="Archive.today">Archive.today</button>
                    </div>
                </div>
            </div>

            <div class="accordion-item">
                <h2 class="accordion-header" id="head_search_image">
                    <label class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#body_search_image" aria-expanded="false" aria-controls="body_search_image">
                        Reverse Image Search
                    </label>
                </h2>
                <div id="body_search_image" class="accordion-collapse collapse" aria-labelledby="head_search_image" data-bs-parent="#accordion_items">
                    <div class="accordion-body d-flex justify-content-evenly" id="accordion-body-search_image">
                        <button type="button" class="btn btn-secondary text-white search-btn" data-name="Google Image">Google</button>
                        <button type="button" class="btn btn-secondary text-white search-btn" data-name="Yandex Image">Yandex</button>
                        <button type="button" class="btn btn-secondary text-white search-btn" data-name="Bing Image">Bing</button>
                        <button type="button" class="btn btn-secondary text-white search-btn" data-name="TinEYE Image">TinEye</button>
                    </div>
                </div>
            </div>

            <div class="accordion-item">
                <h2 class="accordion-header" id="head_check_date">
                    <label class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#body_check_date" aria-expanded="false" aria-controls="body_check_date">
                        Check Publish Date
                    </label>
                </h2>
                <div id="body_check_date" class="accordion-collapse collapse" aria-labelledby="head_check_date" data-bs-parent="#accordion_items">
                    <div class="accordion-body d-flex justify-content-evenly" id="accordion-body-check_date">
                        <button type="button" class="btn btn-secondary text-white search-btn" data-name="Carbon Dating">Carbon Dating</button>
                        <button type="button" class="btn btn-secondary text-white search-btn" data-name="Google Search">Google Search</button>
                    </div>
                </div>
            </div>

        </div>

    </div>

</body>

<script>

    var canvas_div = document.getElementById("particle");

    var options = {
        particleColor: '#333',
        background: '#fafafa',
        interactive: false,
        speed: 0.16,
        density: 18000   // 'low': 20000, 'medium': 10000
    };

    var particle_canvas = new ParticleNetwork(canvas_div, options);

</script>

<script>

    const quicklinks = {
        // https://lens.google.com/uploadbyurl?url=[url]
        "Google Cache": "https://webcache.googleusercontent.com/search?q=cache:[url]",
        "Internet Archive": "https://web.archive.org/web/*/[url]",
        "Archive.today": "https://archive.ph/[url]",
        "Google Image": "https://www.google.com/searchbyimage?sbisrc=cr_1_5_2&image_url=[url]",
        "Yandex Image": "https://yandex.com/images/search?rpt=imageview&url=[url]",
        "Bing Image": "https://www.bing.com/images/search?q=imgurl:[url]&view=detailv2&selectedIndex=0&pageurl=&mode=ImageViewer&iss=sbi",
        "TinEYE Image": "https://tineye.com/search/?url=[url]",
        "Carbon Dating": "https://carbondate.cs.odu.edu/#[url]/",
        "Google Search": "https://google.com/search?q=inurl:[url]&as_qdr=y15",
    };

    let search_buttons = document.querySelectorAll('.search-btn');
    search_buttons.forEach((search_button) => {
        search_button.onclick = (ev) => {
            let inputs = document.querySelectorAll('input');
            for (const input of inputs) {
                let is_valid = input.reportValidity();
                if (!is_valid)  return;
            }

            let target_url = document.getElementById("search-url").value;
            let base_url = quicklinks[ev.currentTarget.dataset.name];
            let url = base_url.replace("[url]", target_url);
            
            window.open(url, '_blank');
        };
    });

</script>

</html>
