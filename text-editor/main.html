<!doctype html>
<html lang="en" class="h-100">

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>Text Editor</title>

    <script src="lib/codemirror.min.js"></script>
    <script src="lib/FileSaver.min.js"></script>
    <script src="lib/text-editor.js"></script>

    <!-- <script src="lib/jquery.min.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <script src="keymap/sublime.js"></script>
    <script src="addon/comment/comment.js"></script>
    <script src="addon/edit/matchbrackets.js"></script>
    <!-- <script src="addon/edit/matchbrackets.js"></script> -->
    <script src="addon/fold/foldcode.js"></script>
    <script src="addon/fold/foldgutter.js"></script>
    <script src="addon/fold/indent-fold.js"></script>
    <script src="addon/fold/brace-fold.js"></script>
    <script src="addon/fold/comment-fold.js"></script>
    <script src="addon/fold/markdown-fold.js"></script>
    <script src="addon/mode/loadmode.js"></script>
    <script src="mode/meta.js"></script>
    <link rel="stylesheet" href="lib/codemirror.css">
    <link rel="stylesheet" href="lib/text-editor.css">
    <link rel="stylesheet" href="lib/devicon.min.css">
    <link rel="stylesheet" href="theme/neo-dev.css">
    <link rel="stylesheet" href="addon/fold/foldgutter.css">

    <script type="text/javascript" src="../assets/particle-network.min.js"></script>
</head>

<body class="h-100">

    <div class="h-100 w-100 p-0 m-0" id="particle"></div>

    <div class="position-absolute top-50 start-50 translate-middle border shadow-sm card-img-overlay" id="setup">
        <p class="lead text-center">Text Editor</p>

        <div class="input-group">
            <input type="file" class="form-control" aria-label="Upload" onchange="load_file(this)">
        </div>

        <hr class="bg-secondary border-3 border-top border-secondary">

        <div class="input-group mb-3 d-flex">
            <span class="input-group-text justify-content-center">Create File</span>
            <input type="text" class="form-control" placeholder="Input [name].[ext]" id=mode required>
            <button class="btn btn-outline-secondary" type="button" onclick="change()">Submit</button>
        </div>

        <div class="container">
            <div class="row">
                <div class="col btn icon devicon-python-plain" data-val="untitled.py"> Python</div>
                <div class="col btn icon devicon-javascript-plain" data-val="untitled.js"> JavaScript</div>
                <div class="col btn icon devicon-haskell-plain" data-val="untitled.hs"> Haskell</div>
                <div class="w-100"></div>
                <div class="col btn icon devicon-cplusplus-plain" data-val="untitled.cpp"> C++</div>
                <div class="col btn icon devicon-java-plain" data-val="untitled.java"> Java</i></div>
                <div class="col btn icon devicon-go-plain" data-val="untitled.go"> GO</div>
            </div>
        </div>
    </div>

    <div id="config" style="display: none;" class="fn-grid-container">
        <div id="plus_btn" class="grid-item" style="font-size: 25px">&plus;</div>
        <div id="minus_btn" class="grid-item" style="font-size: 25px">&minus;</div>
        <div class="grid-item" onclick="rmSpaceLine()">Clean Lines</div>
        <div class="grid-item" onclick="saveFile()">Download</div>
    </div>

</body>

<script>
    var filename, font_size = 19;
    var modeInput = document.getElementById("mode");
    var editor = CodeMirror(document.body, {
        theme: "neo",
        keyMap: "sublime",
        indentUnit: 4,
        lineNumbers: true,
        lineWrapping: true,
        matchBrackets: true,
        // highlightNonMatching: false,
        // spellcheck: false,
        foldGutter: true,
        gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"],
        extraKeys: {
            "Tab": cm => cm.execCommand("indentMore"),
            "Ctrl-Q": cm => cm.foldCode(cm.getCursor()),
            "Ctrl-[": cm => cm.execCommand('foldAll'),
            "Ctrl-]": cm => cm.execCommand('unfoldAll'),
            "Cmd-S": cm => false,
        },
    });

    CodeMirror.modeURL = "mode/%N/%N.js";
    CodeMirror.on(modeInput, "keypress", function(e) {
        if (e.keyCode == 13) change(null);
    });

    init();
</script>

<script>
    var canvas_div = document.getElementById("particle");

    var options = {
        particleColor: '#333',
        background: '#fafafa',
        interactive: false,
        speed: 0.16,
        density: 18000   // 'low': 20000, 'medium': 10000
    };

    var particle_canvas = new ParticleNetwork(canvas_div, options);
</script>

</html>
